(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){e.exports=a(420)},161:function(e,t,a){},416:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(16),r=a.n(i),o=(a(161),a(19)),s=a(20),c=a(22),d=a(21),u=a(23),p=a(5),m=a(53),h=a(41),f=a(68),v=a.n(f),E=a(69),y=a.n(E),g=a(18),C=a.n(g),b=a(26),x=a.n(b),O=a(67),w=a.n(O),S=a(146),j=a.n(S),_=a(147),L=a.n(_),M=a(17),N=a(143),R=a.n(N),k=a(145),T=a.n(k),V=a(25),A=a.n(V),I=Object(M.withStyles)({clip:{marginTop:10},clip__card:{minHeight:30,margintop:5,paddingTop:5,marginBottom:5},clip__icon:{height:40,width:40,fill:"#303f9f","&:hover":{fill:"#565f98",cursor:"pointer"},"&:active":{transform:"scale(0.8)"}}})(function(e){var t=e.classes;return l.a.createElement("div",{className:t.clip},l.a.createElement(R.a,{className:t.clip__card},l.a.createElement(T.a,null,l.a.createElement(p.Row,{center:"xs",middle:"xs"},l.a.createElement(p.Col,{xs:6,md:6,lg:1},l.a.createElement(A.a,{color:"primary",className:t.clip.button,onClick:function(){e.handlePlay(e.data.id)}},l.a.createElement(w.a,{className:t.clip__icon}))),l.a.createElement(p.Col,{xs:6,md:6,lg:5},l.a.createElement(x.a,{variant:"title",color:"inherit"},e.data.name)),l.a.createElement(p.Col,{xs:6,md:6,lg:3},l.a.createElement(x.a,{variant:"subheading",color:"inherit"},"00:",e.data.start," / 00:",e.data.end)),l.a.createElement(p.Col,{xs:6,md:6,lg:3},!e.data.fixed&&l.a.createElement(p.Row,null,l.a.createElement(p.Col,{xs:6},l.a.createElement(A.a,{color:"primary",className:t.clip.button},l.a.createElement(j.a,{className:t.clip__icon,onClick:function(){e.handleEdit(e.data.id)}}))),l.a.createElement(p.Col,{xs:6},l.a.createElement(A.a,{color:"primary",className:t.clip.button},l.a.createElement(L.a,{className:t.clip__icon,onClick:function(){e.handleDelete(e.data.id)}})))))))))}),P=Object(M.withStyles)({playAll:{marginTop:10,marginBottom:10},playAll__icon:{height:70,width:70,fill:"#303f9f","&:hover":{fill:"#565f98",cursor:"pointer"},"&:active":{transform:"scale(0.8)"}}})(function(e){var t=e.classes;return l.a.createElement(A.a,{color:"primary",className:t.playAll,onClick:function(){e.handlePlayAll()}},l.a.createElement(w.a,{className:t.playAll__icon}))}),D=a(148),B=a.n(D),H=a(149),U=a(150),W=a.n(U),G={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"40vw",minHeight:"200px",height:"30vh",boxShadow:"7px 7px 17px -4px rgba(0,0,0,0.75)"}},J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",sliderValues:[5,10],isEditting:!1,currentClipId:0},a.changeHandler=function(e){a.setState({sliderValues:e})},a.handleChange=function(e){return function(t){a.setState(Object(h.a)({},e,t.target.value))}},a.notAvailableName=function(){return a.isCurrentNameinList()||""===a.state.name.trim()},a.saveClip=function(){console.log(a.state.currentClipId),a.props.handleSave({id:a.state.isEditting?a.state.currentClipId:a.props.maxId+1,name:a.state.name,start:a.state.sliderValues[0],end:a.state.sliderValues[1],fixed:!1,tags:[]},!a.state.isEditting),a.setState({name:"",sliderValues:[5,10]}),a.props.handleCloseModal(),a.setState({isEditting:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isCurrentNameinList",value:function(){var e=this;return C.a.some(this.props.currentNames,function(t){return t.toLowerCase()===e.state.name.toLowerCase()})}},{key:"componentWillReceiveProps",value:function(e){e.openModal&&e.openModal.clip&&this.setState({name:e.openModal.clip.name,sliderValues:[e.openModal.clip.start,e.openModal.clip.end],isEditting:!0,currentClipId:e.openModal.clip.id})}},{key:"isCurrentNameSameThanEdit",value:function(){return!(!this.props.openModal||!this.props.openModal.clip)&&(this.state.name.toLowerCase()===this.props.openModal.clip.name.toLowerCase()&&""!==this.state.name.trim())}},{key:"getTimeValue",value:function(e){var t=+e<10?"0":"";return"00:".concat(e).concat(t)}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(B.a,{isOpen:this.props.openModal.state,onRequestClose:this.props.handleCloseModal,onAfterOpen:this.afterOpenModal,style:G,contentLabel:"Example Modal",ariaHideApp:!1},l.a.createElement(p.Grid,null,l.a.createElement(p.Row,{middle:"xs",end:"xs"},l.a.createElement(p.Col,{xs:1},l.a.createElement(A.a,{color:"primary"},l.a.createElement(W.a,{className:e.modalCreate__button,onClick:this.props.handleCloseModal})))),l.a.createElement(p.Row,{middle:"xs"},l.a.createElement(p.Col,{xs:6},l.a.createElement(x.a,{variant:"title",color:"inherit"},"Create new slice"))),l.a.createElement(p.Row,{middle:"xs"},l.a.createElement(p.Col,{xs:6},l.a.createElement(v.a,{id:"name",label:"Name",value:this.state.name,onChange:this.handleChange("name"),margin:"normal",variant:"outlined"})),l.a.createElement(p.Col,{xs:6},l.a.createElement(p.Row,null,l.a.createElement(p.Col,{xs:12},l.a.createElement(H.Slider,{range:!0,min:0,max:this.props.maxRange,defaultValue:this.state.sliderValues,onChange:this.changeHandler})),l.a.createElement(p.Col,{xs:12},l.a.createElement(p.Row,{around:"xs"},l.a.createElement(p.Col,{xs:1},l.a.createElement(x.a,{variant:"subtitle1",color:"inherit"},this.getTimeValue(this.state.sliderValues[0]))),l.a.createElement(p.Col,{xs:1},l.a.createElement(x.a,{variant:"subtitle1",color:"inherit"},this.getTimeValue(this.state.sliderValues[1])))))))),l.a.createElement(p.Row,{middle:"xs",end:"xs"},l.a.createElement(p.Col,{xs:12},!this.notAvailableName()||this.state.isEditting?l.a.createElement(y.a,{variant:"contained",color:"primary",className:e.modalCreate__button_save,onClick:this.saveClip},"Save"):l.a.createElement(x.a,{variant:"subtitle1",color:"inherit",className:e.modalCreate__button_save},"invalid name or already exist !!")))))}}]),t}(n.Component),Y=Object(M.withStyles)({modalCreate__button:{height:20,width:20},modalCreate__button_save:{marginTop:20}})(J),q=a(42),F=function(e){return function(t){t({type:"SET_VIDEO_DURATION",payload:{videoDuration:e}})}},Z=function(e){return function(t){t({type:"SET_PLAY_LIST",payload:{playList:e}})}},$={id:1,name:"Full video",start:0,end:0,fixed:!0,tags:["full"]},z={name:"",sliderValues:[5,10]},K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){switch(a.setState(Object(h.a)({},e,t.target.value)),e){case"search":a.filterClips(t.target.value)}}},a.filterClips=function(e){var t=a.state.clips;t=t.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())}),a.setState({filteredClips:t})},a.handlePlay=function(e){var t=a.getClipById(e);a.props.dispatch(Z([t]))},a.handleDelete=function(e){a.deleteClip(e)},a.handleEdit=function(e){var t=a.getClipById(e);a.setState({defaultValues:{name:t.name,sliderValues:[t.start,t.end]},openModal:{clip:t}},function(){a.setState({openModal:{state:!0}})})},a.handleCloseModal=function(){a.setState({openModal:{state:!1,clip:null,defaultValues:z.sliderValues}})},a.handleOpenModal=function(){a.setState({openModal:{state:!0,clip:null}})},a.getCurrentNames=function(){return C.a.map(a.state.clips,function(e){return e.name})},a.getMaxClipsId=function(){return a.state.clips.reduce(function(e,t){return e>t.id?e:t.id},0)},a.handleSave=function(e,t){a.saveOrUpdateClip(e,t)},a.handlePlayAll=function(){a.props.dispatch(Z(a.state.filteredClips))},a.state={search:"",clips:[$],filteredClips:[$],maxId:$.id,openModal:{state:!1,clip:null},maxRange:0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.videoSliceReducer.videoDuration;this.props.videoSliceReducer.videoDuration!==a&&this.setState({clips:[Object(m.a)({},$,{end:a.toString().split(".")[0]})],maxRange:a.toString().split(".")[0]},function(){t.filterClips(t.state.search)})}},{key:"getClipById",value:function(e){return C.a.filter(this.state.clips,function(t){return t.id===e})[0]}},{key:"saveOrUpdateClip",value:function(e,t){var a,n=this,l=[];t?l=C.a.concat(this.state.clips,e):(a=C.a.cloneDeep(this.state.clips),C.a.remove(a,function(t){return t.id===e.id}),l=C.a.concat(a,e)),this.setState({clips:l},function(){n.setState({maxId:n.getMaxClipsId()}),n.filterClips(n.state.search),localStorage.setItem("clips",JSON.stringify(n.state.clips))})}},{key:"deleteClip",value:function(e){var t=this,a=C.a.filter(C.a.cloneDeep(this.state.clips),function(t){return t.id!==e});this.setState({clips:a},function(){t.filterClips(t.state.search)})}},{key:"render",value:function(){var e=this,t=this.state.filteredClips.map(function(t,a){return l.a.createElement(p.Col,{key:a,xs:12},l.a.createElement(I,{data:t,handlePlay:e.handlePlay,handleEdit:e.handleEdit,handleDelete:e.handleDelete}))});return l.a.createElement("section",null,l.a.createElement(p.Grid,{fluid:!0},l.a.createElement(p.Row,{center:"xs"},l.a.createElement(p.Col,{xs:12},l.a.createElement(v.a,{id:"outlined-name",label:"Search",value:this.state.search,onChange:this.handleChange("search"),margin:"normal",variant:"outlined"}))),l.a.createElement(p.Row,{center:"xs",middle:"xs"},l.a.createElement(p.Col,{xs:12,lg:6},l.a.createElement(P,{handlePlayAll:this.handlePlayAll})),l.a.createElement(p.Col,{xs:12,lg:6},l.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.handleOpenModal},"New slice"),l.a.createElement(Y,{openModal:this.state.openModal,handleCloseModal:this.handleCloseModal,subtitle:"test",currentNames:this.getCurrentNames(),maxId:this.state.maxId,handleSave:this.handleSave,maxRange:this.state.maxRange}))),l.a.createElement(p.Row,null,t)))}}]),t}(n.Component),Q=Object(q.b)(function(e){return e})(K),X=Object(M.withStyles)({videoHandlerLayout:{height:"70vh",width:"100%",backgroundColor:"#A4A4A4",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}})(function(e){var t=e.classes;return l.a.createElement("section",{className:t.videoHandlerLayout},e.children)}),ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).setRef=function(e){a.video=e},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.play!==e.play&&e.play&&(this.video.load(),this.video.play())}},{key:"render",value:function(){var e=this.props,t=e.handleLoadedMetadata,a=e.handleEnded,n=e.handleTimeUpdated,i=this.props.classes;return l.a.createElement("div",{className:i.video_container},l.a.createElement("video",{className:i.video_container__item,id:"video",autoPlay:this.props.autoplay,ref:this.setRef,onLoadedMetadata:t,onEnded:a,onTimeUpdate:n},l.a.createElement("source",{src:"".concat(this.props.src,"#t=").concat(this.props.start,",").concat(this.props.end),type:"video/mp4"}),"Your browser does not support HTML5 video."))}}]),t}(n.Component),te=Object(M.withStyles)({video_container:{width:"100%",height:"70%",backgroundColor:"black"},video_container__item:{width:"100%;",height:"auto"}})(ee),ae=a(151),ne=a.n(ae),le=(a(416),function(){return l.a.createElement("div",{className:"loading"},l.a.createElement(ne.a,{className:"loading__icon rotating"}))}),ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={fullVideoDuration:0,start:0,end:0,play:!1,playListCount:0,currentExecution:0,playList:[],loading:!1},a.handleLoadedMetadata=function(e){a.video=e.target,a.setState({fullVideoDuration:a.video.duration},function(){a.props.dispatch(F(a.state.fullVideoDuration))})},a.handleEnded=function(e){a.stopPlay()},a.handleTimeUpdated=function(e){e.target.currentTime>=a.state.end&&a.stopPlay()},a.stopPlay=function(){a.setState({play:!1,currentExecution:a.state.currentExecution+1},function(){a.executeClip()})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.videoSliceReducer.playList;this.props.videoSliceReducer.playList!==t&&this.executePlayList(t)}},{key:"executePlayList",value:function(e){var t=this;C.a.isEmpty(e)||this.setState({playListCount:e.length,currentExecution:0,playList:e},function(){t.executeClip()})}},{key:"executeClip",value:function(){var e=this;if(this.state.currentExecution<this.state.playListCount){var t,a=this.state.playList[this.state.currentExecution];t=0===this.state.currentExecution?0:3e3,this.setState({loading:!0},function(){setTimeout(function(){e.setState({start:a.start,end:a.end},function(){e.setState({play:!0})}),e.setState({loading:!1})},t)})}else this.props.dispatch(Z([]))}},{key:"render",value:function(){return l.a.createElement(X,null,l.a.createElement(te,{src:"https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4",autoplay:!1,handleLoadedMetadata:this.handleLoadedMetadata,start:this.state.start,end:this.state.end,play:this.state.play,handleEnded:this.handleEnded,handleTimeUpdated:this.handleTimeUpdated}),this.state.loading&&l.a.createElement(le,null))}}]),t}(n.Component),re=Object(q.b)(function(e){return e})(ie),oe=a(152),se=a.n(oe),ce=a(153),de=a.n(ce),ue=a(154),pe=a.n(ue),me=Object(M.withStyles)({root:{flexGrow:1},menuButton:{marginLeft:-18,marginRight:10},header:{marginBottom:20}})(function(e){var t=e.classes;return l.a.createElement(se.a,{position:"static",className:t.header},l.a.createElement(de.a,{variant:"dense"},l.a.createElement(A.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},l.a.createElement(pe.a,null)),l.a.createElement(x.a,{variant:"h6",color:"inherit"},"VideoSlice HZ")))}),he=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(me,null),l.a.createElement(p.Grid,null,l.a.createElement(p.Row,null,l.a.createElement(p.Col,{xs:12,lg:6},l.a.createElement(re,null)),l.a.createElement(p.Col,{xs:12,lg:6},l.a.createElement(Q,null)))))}}]),t}(n.Component),fe=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(he,{className:"border"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(33),Ee={videoDuration:0,playList:[]},ye=a(155),ge=Object(ve.c)({videoSliceReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_DURATION":return Object(m.a)({},e,{videoDuration:t.payload.videoDuration});case"SET_PLAY_LIST":return Object(m.a)({},e,{playList:t.payload.playList});default:return e}}}),Ce=Object(ve.e)(ge,Object(ve.d)(Object(ve.a)(ye.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));r.a.render(l.a.createElement(q.a,{store:Ce},l.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[156,2,1]]]);
//# sourceMappingURL=main.f4a95550.chunk.js.map